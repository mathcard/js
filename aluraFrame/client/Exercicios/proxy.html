<!-- upload.html (2) -->
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>PROXY</title>
</head>
<body>
     <h1>Exercícios</h1>
     <h2>Proxy</h2>
       
    
    <script>
       // Exercicio proxy 1
/*      let funcionario = {email: 'abc@abc.com'};
        let funcionarioProxy = new Proxy(funcionario ,{
            get(target, prop, receiver) {
                console.log("Armadilha aqui");
               // return Reflect.get(target, prop, receiver);
               // Retornando com asteristicos
               return '**' + Reflect.get(target, prop, receiver) + '**' ;        
            }
        });
  
        console.log(funcionarioProxy.email);
*/
        // Exercicio proxy 2

        class Funcionario {
            constructor(email) {
                this._email = email;
            }

            get email() {
                return this._email;
            }

            set email(email) {
                this._email = email;
            }
        }
/*        
        let funcionario = new Proxy(new Funcionario('abc@abc.com'), {
            get(target, prop, receiver) {
                console.log('Armadilha aqui!');
                console.log(prop);
                return Reflect.get(target, prop, receiver);
            }
        });

        console.log(funcionario.email);
*/
        // Exercicio proxy 3 ->   Crie um proxy que exibe no console o valor da propriedade antes dela ser alterada e o valor novo.
/*        let funcionario = {email: 'abc@abc.com'};
        let funcionarioProxy = new Proxy(funcionario, {
            set(target, prop, value, receiver) {
                console.log(`Valor antigo ${target[prop]}, valor atual: ${value}`);
                return Reflect.set(target, prop, value, receiver);
            }
        });
        funcionarioProxy.email = 'aaa@aaa.com';
  */  
        // Exercicio proxy 4 -> Crie um proxy que exiba no console o valor da propriedade antes de ela ser alterada e o valor novo. Inclusive, exiba também o nome da propriedade que está sendo modificada.
        let funcionario= new Proxy(new Funcionario('abc@abc.com'),  {
            set(target, prop, value, receiver) {
                console.log(prop); // imprimindo a propriedade que está sendo alterada
                console.log(`Valor antigo ${target[prop]}, valor atual: ${value}`);
                return Reflect.set(target, prop, value, receiver);
            }
        });
        funcionario.email = 'aaa@aaa.com';

        //Arguments
        function exibeNomeCompleto() {
        alert(`${arguments[0]} ${arguments[1]}`);
        
        }

        exibeNomeCompleto('Flávio', 'Almeida');
    </script>
</body>
</html>